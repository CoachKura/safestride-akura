# ğŸƒ ATHLETE LIFECYCLE MANAGEMENT SYSTEM

## Complete Journey: Signup â†’ 14-Day Baseline â†’ Daily Adaptation â†’ Goal Achievement

---

## ğŸ¯ ULTIMATE GOAL

**"Every athlete runs at their goal pace in 80% HR zone, finishes strong in all races, INJURY-FREE"**

---

## ğŸ“‹ SYSTEM OVERVIEW

### Complete Athlete Journey:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. SIGNUP/SIGNIN                                                   â”‚
â”‚     â€¢ App/Web registration                                          â”‚
â”‚     â€¢ Connect Strava                                                â”‚
â”‚     â€¢ Fill detailed athlete profile                                 â”‚
â”‚     â€¢ System captures "BEFORE SIGNUP" baseline                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. 14-DAY BASELINE ASSESSMENT                                      â”‚
â”‚     â€¢ Coach assigns structured workouts                             â”‚
â”‚     â€¢ Includes: Running + Strengthening + ROM protocols             â”‚
â”‚     â€¢ Daily performance tracking                                    â”‚
â”‚     â€¢ System learns athlete's true capability                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. DAILY PERFORMANCE TRACKING                                      â”‚
â”‚     â€¢ Track: GIVEN workout vs EXPECTED vs RESULT                    â”‚
â”‚     â€¢ Performance labels: BEST / GREAT / GOOD / POOR                â”‚
â”‚     â€¢ Daily ability deduction                                       â”‚
â”‚     â€¢ Injury risk monitoring                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. ADAPTIVE WORKOUT GENERATION                                     â”‚
â”‚     â€¢ Next workout adapts based on previous performance             â”‚
â”‚     â€¢ Progressive overload (safe progression)                       â”‚
â”‚     â€¢ Heart rate zone optimization (80% target)                     â”‚
â”‚     â€¢ Goal pace progression                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. CONTINUOUS IMPROVEMENT                                          â”‚
â”‚     â€¢ Self-learning ML engine tracks progress                       â”‚
â”‚     â€¢ Celebrates milestones                                         â”‚
â”‚     â€¢ Prevents injuries proactively                                 â”‚
â”‚     â€¢ Guides to race-ready state                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ DATABASE SCHEMA DESIGN

### NEW TABLES REQUIRED:

#### 1. **athlete_detailed_profile**

```sql
CREATE TABLE athlete_detailed_profile (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  athlete_id UUID REFERENCES athlete_profiles(athlete_id) UNIQUE,

  -- Signup Information (BEFORE state)
  signup_date TIMESTAMP DEFAULT NOW(),
  current_level VARCHAR(20), -- 'beginner', 'intermediate', 'advanced'

  -- Goal Setting
  primary_goal VARCHAR(50), -- '5K', '10K', 'Half Marathon', 'Marathon'
  goal_type VARCHAR(20), -- 'time_based', 'pace_based'
  goal_target_time INTERVAL, -- for time-based goals
  goal_target_pace INTERVAL, -- for pace-based goals (min/km)
  target_race_date DATE,

  -- Baseline Metrics (BEFORE signup)
  before_signup_json JSONB, -- {weekly_volume, avg_pace, consistency, etc.}

  -- Current Physical Status
  current_weekly_volume_km FLOAT,
  current_avg_pace_min_per_km INTERVAL,
  current_max_hr INTEGER,
  current_resting_hr INTEGER,
  target_hr_zone_percent INTEGER DEFAULT 80,

  -- Injury History
  injury_history JSONB, -- [{type, date, severity, recovery_time}]
  current_injuries JSONB,
  injury_prone_areas TEXT[],

  -- Training Background
  years_of_running INTEGER,
  previous_races JSONB, -- [{race_type, date, time, pace}]
  training_frequency_per_week INTEGER,

  -- Preferences
  preferred_training_days TEXT[], -- ['Monday', 'Wednesday', 'Friday']
  available_training_time_minutes INTEGER,
  equipment_available JSONB, -- {gym_access, treadmill, heart_rate_monitor}

  -- Assessment Status
  baseline_assessment_status VARCHAR(20) DEFAULT 'not_started', -- 'not_started', 'in_progress', 'completed'
  baseline_start_date DATE,
  baseline_completion_date DATE,

  -- Metadata
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### 2. **baseline_assessment_plan**

```sql
CREATE TABLE baseline_assessment_plan (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  athlete_id UUID REFERENCES athlete_profiles(athlete_id),

  -- 14-Day Plan Structure
  day_number INTEGER CHECK (day_number BETWEEN 1 AND 14),
  workout_date DATE,

  -- Workout Components
  workout_type VARCHAR(30), -- 'easy_run', 'tempo_run', 'interval', 'long_run', 'rest', 'strength', 'rom'
  workout_details JSONB, -- {distance, pace, intervals, reps, exercises}

  -- Expected Performance
  expected_duration_minutes INTEGER,
  expected_distance_km FLOAT,
  expected_avg_pace INTERVAL,
  expected_avg_hr INTEGER,
  expected_effort_level INTEGER, -- 1-10 scale

  -- Instructions
  coach_instructions TEXT,
  focus_areas TEXT[], -- ['cadence', 'form', 'breathing', 'heart_rate']

  -- Status
  completion_status VARCHAR(20) DEFAULT 'scheduled', -- 'scheduled', 'completed', 'skipped', 'modified'

  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(athlete_id, day_number)
);
```

#### 3. **daily_performance_tracking**

```sql
CREATE TABLE daily_performance_tracking (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  athlete_id UUID REFERENCES athlete_profiles(athlete_id),
  workout_date DATE,

  -- Workout Assignment
  assigned_workout_id UUID REFERENCES baseline_assessment_plan(id),
  workout_type VARCHAR(30),

  -- GIVEN (What was assigned)
  given_workout JSONB, -- Expected workout details
  given_duration_minutes INTEGER,
  given_distance_km FLOAT,
  given_pace INTERVAL,
  given_hr_target INTEGER,

  -- EXPECTED (What athlete should achieve)
  expected_performance JSONB, -- Performance targets

  -- RESULT (What actually happened)
  actual_duration_minutes INTEGER,
  actual_distance_km FLOAT,
  actual_avg_pace INTERVAL,
  actual_avg_hr INTEGER,
  actual_max_hr INTEGER,
  actual_cadence INTEGER,
  actual_effort_perceived INTEGER, -- 1-10 (RPE - Rate of Perceived Exertion)

  -- Strava/Garmin Data
  strava_activity_id BIGINT,
  activity_data JSONB, -- Full activity details from Strava/Garmin

  -- Performance Analysis
  performance_vs_expected FLOAT, -- percentage: actual/expected
  pace_variance_percent FLOAT,
  hr_zone_adherence_percent FLOAT, -- % time in target zone
  consistency_score FLOAT, -- 0-100

  -- Performance Label
  performance_label VARCHAR(20), -- 'BEST', 'GREAT', 'GOOD', 'AVERAGE', 'POOR', 'NEEDS_ATTENTION'
  performance_notes TEXT,

  -- Athlete Feedback
  athlete_comments TEXT,
  how_felt VARCHAR(30), -- 'amazing', 'strong', 'normal', 'tired', 'exhausted'
  pain_or_discomfort JSONB, -- [{area, severity, description}]

  -- AI Analysis
  ai_analysis JSONB, -- {strengths, areas_for_improvement, injury_risk, recommendations}
  ability_deduction FLOAT, -- Current ability score (0-100)

  -- Next Workout Adjustment
  adjustment_needed BOOLEAN DEFAULT false,
  adjustment_reason TEXT,
  recommended_next_workout JSONB,

  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 4. **adaptive_workout_generation**

```sql
CREATE TABLE adaptive_workout_generation (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  athlete_id UUID REFERENCES athlete_profiles(athlete_id),

  -- Workout Schedule
  scheduled_date DATE,
  workout_type VARCHAR(30),

  -- Generated Workout (Based on Previous Performance)
  workout_plan JSONB, -- Complete workout structure

  -- Adaptation Logic
  based_on_performance_ids UUID[], -- References to daily_performance_tracking
  adaptation_factors JSONB, -- {previous_performance, recovery_status, injury_risk}
  progressive_overload_percent FLOAT, -- Safe progression rate

  -- Workout Details
  target_duration_minutes INTEGER,
  target_distance_km FLOAT,
  target_pace_range JSONB, -- {min_pace, max_pace}
  target_hr_zone JSONB, -- {min_hr, max_hr, target_percent: 80}

  -- Specifics for Different Workout Types
  intervals JSONB, -- For interval workouts: [{distance, pace, recovery}]
  strength_exercises JSONB, -- [{exercise, sets, reps, weight}]
  rom_protocols JSONB, -- [{stretch, duration, reps}]

  -- Safety & Injury Prevention
  injury_risk_score FLOAT, -- 0-100
  fatigue_level VARCHAR(20), -- 'low', 'moderate', 'high'
  recovery_recommendation TEXT,

  -- Goal Alignment
  contributes_to_goal VARCHAR(50), -- How this workout helps achieve goal
  goal_progress_percent FLOAT, -- % toward race goal

  -- Coach Guidance
  ai_coach_notes TEXT,
  focus_for_this_workout TEXT[],
  form_cues TEXT[],

  -- Status
  status VARCHAR(20) DEFAULT 'scheduled', -- 'scheduled', 'sent_to_athlete', 'completed', 'skipped'

  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 5. **athlete_ability_progression**

```sql
CREATE TABLE athlete_ability_progression (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  athlete_id UUID REFERENCES athlete_profiles(athlete_id),
  assessment_date DATE DEFAULT CURRENT_DATE,

  -- Ability Metrics (Daily Deduction)
  overall_ability_score FLOAT, -- 0-100
  endurance_score FLOAT,
  speed_score FLOAT,
  strength_score FLOAT,
  form_score FLOAT,
  consistency_score FLOAT,

  -- Performance Indicators
  current_aerobic_threshold_pace INTERVAL,
  current_vo2max_estimate FLOAT,
  current_lactate_threshold_hr INTEGER,
  current_sustainable_pace INTERVAL, -- Pace at 80% HR

  -- Goal Progress
  goal_pace_gap INTERVAL, -- Difference between current and goal pace
  goal_readiness_percent FLOAT, -- 0-100: How ready for race goal
  estimated_finish_time INTERVAL, -- Current predicted race time

  -- Injury Risk
  injury_risk_level VARCHAR(20), -- 'low', 'moderate', 'high', 'very_high'
  injury_risk_factors JSONB, -- [{factor, weight, description}]

  -- Training Load
  acute_chronic_workload_ratio FLOAT, -- ACWR for injury prevention
  training_stress_score FLOAT,
  fatigue_level FLOAT,

  -- AI Insights
  strengths TEXT[],
  areas_for_improvement TEXT[],
  next_milestone TEXT,
  days_to_goal_readiness INTEGER,

  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 6. **existing_athlete_import**

```sql
CREATE TABLE existing_athlete_import (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

  -- Import Metadata
  import_batch_id UUID,
  import_date TIMESTAMP DEFAULT NOW(),
  import_source VARCHAR(50), -- 'google_form', 'csv_upload', 'manual'

  -- Raw Data
  raw_data JSONB, -- Original form/CSV data

  -- Mapped Data
  athlete_email VARCHAR(255),
  athlete_name VARCHAR(100),
  phone_number VARCHAR(20),

  -- Parsed Profile
  parsed_profile JSONB, -- Structured athlete data

  -- Import Status
  import_status VARCHAR(30) DEFAULT 'pending', -- 'pending', 'processed', 'athlete_created', 'error'
  error_message TEXT,

  -- Linked Athlete
  created_athlete_id UUID REFERENCES athlete_profiles(athlete_id),

  -- Strava Connection Status
  strava_connected BOOLEAN DEFAULT false,
  strava_connection_date TIMESTAMP,

  created_at TIMESTAMP DEFAULT NOW()
);
```

---

## ğŸ§  SYSTEM COMPONENTS TO BUILD

### 1. **Enhanced Signup/Signin Flow**

**File:** `ai_agents/athlete_onboarding.py`

**Key Functions:**

```python
class AthleteOnboarding:
    async def signup_new_athlete(self, signup_data: dict):
        """
        Complete athlete registration with detailed profiling

        Steps:
        1. Create athlete_profiles record
        2. Create athlete_detailed_profile
        3. Capture "before signup" baseline from Strava
        4. Classify athlete level (beginner/intermediate/advanced)
        5. Set goals (time-based or pace-based)
        6. Generate 14-day baseline assessment plan
        7. Send welcome message with onboarding instructions
        """
        pass

    async def capture_before_signup_baseline(self, athlete_id: str, strava_data: dict):
        """
        Analyze Strava history to establish BEFORE state

        Metrics:
        - Past 90 days activity summary
        - Average weekly volume
        - Average pace
        - Consistency (days per week)
        - Longest run
        - Pace distribution
        """
        pass

    async def classify_athlete_level(self, before_baseline: dict) -> str:
        """
        Determine athlete level based on history

        Criteria:
        - Beginner: < 3 months consistent running, < 20km/week
        - Intermediate: 3-12 months, 20-50km/week, some race experience
        - Advanced: > 12 months, > 50km/week, multiple races
        """
        pass

    async def set_athlete_goals(self, athlete_id: str, goal_data: dict):
        """
        Set SMART goals

        Goal Types:
        - Time-based: "Run 10K in under 50 minutes"
        - Pace-based: "Maintain 5:00/km for 10K"

        Includes:
        - Target race date
        - Training timeline
        - Milestone checkpoints
        """
        pass
```

---

### 2. **14-Day Baseline Assessment System**

**File:** `ai_agents/baseline_assessment.py`

**Key Functions:**

```python
class BaselineAssessmentGenerator:
    async def generate_14day_plan(self, athlete_id: str):
        """
        Create personalized 14-day assessment plan

        Structure:
        Days 1-4: Easy runs + ROM (assess baseline fitness)
        Days 5-7: Add tempo runs (assess lactate threshold)
        Days 8-10: Add intervals (assess speed capability)
        Days 11-12: Strength assessment
        Days 13-14: Long run (assess endurance) + rest

        Each day includes:
        - Running workout
        - Strengthening exercises (if applicable)
        - ROM protocols
        - Clear instructions
        """
        pass

    async def adapt_to_athlete_level(self, base_plan: list, athlete_level: str):
        """
        Adjust intensity based on athlete level

        Beginner:
        - Lower volume (3-4 runs/week)
        - Easier paces
        - More rest days
        - Focus on form & consistency

        Intermediate:
        - Moderate volume (4-5 runs/week)
        - Varied paces
        - Strength 2x/week

        Advanced:
        - Higher volume (5-6 runs/week)
        - Complex intervals
        - Strength 3x/week
        """
        pass

    async def send_daily_workout(self, athlete_id: str, day_number: int):
        """
        Send today's workout via Telegram

        Message includes:
        - Workout type & details
        - Expected duration/distance/pace
        - Target heart rate zone (80%)
        - Form cues
        - Strengthening exercises
        - ROM protocols
        - Coach notes
        """
        pass
```

---

### 3. **Daily Performance Tracking System**

**File:** `ai_agents/performance_tracker.py`

**Key Functions:**

```python
class DailyPerformanceTracker:
    async def track_workout_completion(self, athlete_id: str, strava_activity_id: int):
        """
        Analyze completed workout vs expected

        Comparison Matrix:

        GIVEN (Assigned):        EXPECTED (Target):        RESULT (Actual):
        - 5K tempo run           - 5.0 km                  - 5.2 km âœ…
        - Pace: 5:30/km          - Pace: 5:15-5:45/km      - Pace: 5:22/km âœ…
        - Duration: 27:30        - Duration: ~27 min        - Duration: 27:50 âœ“
        - HR: 155-165 bpm        - HR: 160 bpm (80%)       - HR: 162 bpm âœ…

        Performance Label: GREAT
        """
        pass

    async def calculate_performance_label(self, given: dict, expected: dict, result: dict) -> str:
        """
        Determine performance quality

        Labels:
        - BEST: Exceeded expectations significantly (> 10% better)
        - GREAT: Above expectations (5-10% better)
        - GOOD: Met expectations (within 5%)
        - AVERAGE: Slightly below expectations (5-10% below)
        - POOR: Significantly below expectations (> 10% below)
        - NEEDS_ATTENTION: Injured / Unable to complete
        """
        pass

    async def deduct_current_ability(self, athlete_id: str):
        """
        Daily ability deduction based on recent performances

        Factors:
        - Last 7 days performance trend
        - Consistency score
        - Pace improvement
        - HR zone adherence
        - Recovery indicators
        - Injury risk signals

        Output: Updated ability_progression record
        """
        pass

    async def analyze_with_ai(self, performance_data: dict):
        """
        AI analysis of performance

        Analysis includes:
        - What went well
        - Areas for improvement
        - Injury risk assessment
        - Recovery needs
        - Next workout recommendations
        """
        pass
```

---

### 4. **Adaptive Workout Generator**

**File:** `ai_agents/adaptive_workout_generator.py`

**Key Functions:**

```python
class AdaptiveWorkoutGenerator:
    async def generate_next_workout(self, athlete_id: str):
        """
        Create tomorrow's workout based on today's performance

        Adaptation Logic:

        IF performance = BEST:
            â†’ Progressive overload: +5-10% volume OR intensity

        IF performance = GREAT:
            â†’ Progressive overload: +3-5% volume OR intensity

        IF performance = GOOD:
            â†’ Maintain current level, slight variation

        IF performance = AVERAGE:
            â†’ Reduce intensity 10%, maintain volume

        IF performance = POOR:
            â†’ Easy day or rest, reassess

        IF performance = NEEDS_ATTENTION:
            â†’ Rest day + injury assessment
        """
        pass

    async def ensure_80_percent_hr_focus(self, workout_plan: dict, athlete_profile: dict):
        """
        Optimize workout for 80% HR zone training

        Goal: Build aerobic base at 80% max HR

        - Calculate 80% HR target
        - Set pace range for this HR zone
        - Provide guidance for staying in zone
        - Monitor drift (HR increasing at same pace = fatigue)
        """
        pass

    async def progress_toward_goal_pace(self, current_pace: str, goal_pace: str, weeks_remaining: int):
        """
        Calculate safe progression to goal pace

        Strategy:
        - Never increase pace by > 5% per week
        - Build aerobic base first (80% HR)
        - Gradually introduce goal pace segments
        - Final 4 weeks: race-specific pace work

        Example:
        Current: 6:00/km
        Goal: 5:00/km (for 10K race in 12 weeks)

        Week 1-4: 6:00/km (build aerobic base)
        Week 5-8: 5:45/km (introduce tempo)
        Week 9-11: 5:15/km (goal pace practice)
        Week 12: Taper + race
        """
        pass

    async def injury_prevention_checks(self, athlete_id: str, proposed_workout: dict):
        """
        Validate workout safety

        Red Flags:
        - ACWR > 1.5 (acute > chronic load)
        - Consecutive hard days
        - Pain reported in previous workout
        - High injury risk score
        - Inadequate recovery

        If red flag: Modify workout (easier or rest day)
        """
        pass
```

---

### 5. **Existing Athletes CSV Import Tool**

**File:** `ai_agents/csv_import_tool.py`

**Key Functions:**

```python
class ExistingAthleteImporter:
    async def import_from_csv(self, csv_file_path: str):
        """
        Import athletes from Google Form CSV

        Steps:
        1. Parse CSV file
        2. Map columns to athlete_detailed_profile fields
        3. Create athlete records
        4. Store in existing_athlete_import table
        5. Send signin invitation via email/SMS
        6. Track Strava connection status
        """
        pass

    async def map_google_form_data(self, form_row: dict):
        """
        Map Google Form responses to database schema

        Example Mapping:
        "What's your running experience?" â†’ years_of_running
        "Weekly running volume?" â†’ current_weekly_volume_km
        "Race goal?" â†’ primary_goal
        "Previous injuries?" â†’ injury_history
        """
        pass

    async def send_signin_invitation(self, athlete_data: dict):
        """
        Send personalized invitation

        Message:
        "Hi [Name]! Welcome to AISRI AI Coaching! ğŸ‰

        We've received your form submission. Next steps:
        1. Download our app: [App Store / Play Store]
        2. Sign in with: [email]
        3. Connect your Strava account
        4. Start your personalized training journey!

        Your coach is waiting! ğŸƒâ€â™‚ï¸ğŸ’ª"
        """
        pass

    async def connect_existing_data_to_strava(self, athlete_id: str, strava_athlete_id: int):
        """
        Link imported athlete with Strava account

        - Merge Google Form data with Strava history
        - Create comprehensive profile
        - Start baseline assessment
        """
        pass
```

---

### 6. **Google Forms Integration (Optional)**

**File:** `ai_agents/google_forms_integration.py`

**Key Functions:**

```python
class GoogleFormsIntegration:
    async def setup_webhook(self, form_id: str):
        """
        Real-time integration with Google Forms

        On form submission:
        1. Receive webhook notification
        2. Fetch form response
        3. Auto-create athlete record
        4. Send welcome email
        """
        pass

    async def poll_for_new_responses(self, form_id: str):
        """
        Alternative: Poll Google Forms API every 5 minutes
        """
        pass
```

---

## ğŸ”„ INTEGRATION WITH SELF-LEARNING ML ENGINE

**File:** `ai_agents/lifecycle_ml_integration.py`

```python
class LifecycleMLIntegration:
    """
    Connect athlete lifecycle system with self-learning ML engine
    """

    async def on_athlete_signup(self, athlete_id: str):
        """
        Triggered when athlete completes signup

        Actions:
        1. Capture before_signup baseline
        2. Initialize journey tracking
        3. Generate 14-day plan
        4. Start self-learning for this athlete
        """
        pass

    async def on_baseline_completion(self, athlete_id: str):
        """
        Triggered after 14-day assessment complete

        Actions:
        1. Analyze baseline performance
        2. Update ability scores
        3. Generate long-term training plan
        4. Set milestone targets
        """
        pass

    async def on_daily_workout_completion(self, athlete_id: str):
        """
        Triggered when Strava syncs workout

        Actions:
        1. Track performance (given | expected | result)
        2. Deduct current ability
        3. Update ML models
        4. Generate next adaptive workout
        5. Send feedback via Telegram
        """
        pass

    async def continuous_learning_cycle(self):
        """
        Daily learning from all athletes

        - Train performance prediction models
        - Update injury risk models
        - Learn optimal progression rates
        - Identify successful patterns
        """
        pass
```

---

## ğŸ“Š EXAMPLE: COMPLETE ATHLETE JOURNEY

### **Athlete: Rajesh (Beginner)**

**DAY 0 - SIGNUP:**

```
Before Signup Baseline (from Strava):
- Weekly volume: 10 km
- Average pace: 7:30/km
- Consistency: 2 runs/week
- Level: BEGINNER

Goal Set:
- Run 10K race in 60 minutes (6:00/km pace)
- Race date: 16 weeks from now
- Goal type: Time-based
```

**DAYS 1-14 - BASELINE ASSESSMENT:**

```
Day 1: Easy 3K run (7:30/km, HR < 150)
  Given: 3K easy
  Expected: 22-23 min, HR 145-155
  Result: 22:30, HR 152, Pace 7:30/km
  Label: GOOD âœ…

Day 2: ROM + Strength (30 min)
  Given: Mobility + Core
  Result: Completed
  Label: GREAT âœ…

Day 3: Easy 4K run (7:15/km, HR < 150)
  Given: 4K easy
  Expected: 29 min, HR 145-155
  Result: 28:45, HR 148, Pace 7:11/km
  Label: GREAT âœ… (Faster than expected!)

... [continuing through Day 14]

Day 14: Assessment Summary
- Average pace improved: 7:30/km â†’ 7:00/km
- Consistency: 10/10 workouts completed
- HR adherence: 85% in target zone
- New ability score: 62/100
- Status: Ready for progressive training!
```

**WEEK 3 - ADAPTIVE TRAINING BEGINS:**

```
Day 15: Next workout generated based on baseline
  Given: 5K tempo (6:45/km, HR 80% = 156)
  Expected: 33:45, HR 155-160
  Result: 33:30, HR 158, Pace 6:42/km
  Label: GREAT âœ…

  AI Analysis:
  "Excellent! You're exceeding expectations. Your aerobic base
   is building nicely. Next workout will add 5% volume.
   Keep focusing on maintaining 80% HR - you're doing great!"

Day 16: (Auto-generated based on Day 15 performance)
  Given: Easy 6K (7:00/km, active recovery)
  Expected: 42 min, HR < 150
  [Workout adapts to previous GREAT performance]
```

**WEEK 6 - PROGRESS CHECK:**

```
Current Stats:
- Average pace: 6:30/km (improved from 7:30/km!)
- Weekly volume: 25km (up from 10km)
- Ability score: 72/100
- Goal pace gap: 30 seconds/km (target: 6:00/km)
- Injury risk: LOW
- Estimated 10K time: 65 minutes (target: 60)

AI Insight:
"Great progress, Rajesh! You've improved 1 min/km in 6 weeks.
 At this rate, you'll hit your 60-minute 10K goal. Keep doing
 80% HR runs - they're building your aerobic engine perfectly!"
```

**WEEK 12 - GOAL PACE TRAINING:**

```
Workouts now include goal pace segments:
- 2K warmup + 3x1K @ 6:00/km + 2K cooldown
- Building race-specific fitness
- Body learning goal pace at 80% HR
```

**WEEK 16 - RACE WEEK:**

```
Current Stats:
- Average pace: 6:00/km (AT GOAL! ğŸ‰)
- 80% HR sustainable pace: 6:02/km
- Ability score: 88/100
- Estimated 10K time: 59:30
- Injury risk: LOW
- Status: RACE READY!

AI Message:
"Rajesh, you're READY! ğŸ‰ You've come from 7:30/km to 6:00/km
 in 16 weeks. Your body can sustain goal pace at 80% HR.
 Race strategy: Start at 6:05/km, settle at 6:00/km, finish strong!
 You've got this! ğŸƒâ€â™‚ï¸ğŸ’ª"
```

**RACE DAY RESULT:**

```
10K Race: 59:15 (5:55/km avg) âœ…âœ…âœ…
- Beat goal by 45 seconds!
- Felt strong throughout
- Injury-free
- Finished with kick

System Analysis:
"INCREDIBLE! You exceeded your goal! This is what happens when
 you train smart with 80% HR focus. Your aerobic base carried
 you to a strong finish. Ready for your next challenge? ğŸ¯"
```

---

## ğŸš€ IMPLEMENTATION PRIORITY

### **PHASE 1: Core Signup & Baseline (Week 1-2)**

1. âœ… Design database schema
2. âœ… Build athlete_onboarding.py
3. âœ… Build baseline_assessment.py
4. âœ… Create signup API endpoints
5. âœ… Test with 1 athlete

### **PHASE 2: Daily Tracking & Adaptation (Week 3-4)**

1. âœ… Build performance_tracker.py
2. âœ… Build adaptive_workout_generator.py
3. âœ… Integrate with Strava webhooks
4. âœ… Test adaptive loop

### **PHASE 3: Existing Athletes Import (Week 5)**

1. âœ… Build csv_import_tool.py
2. âœ… Create CSV mapping template
3. âœ… Import existing athletes
4. âœ… Send signin invitations

### **PHASE 4: ML Integration (Week 6)**

1. âœ… Connect with self_learning_engine.py
2. âœ… Enable continuous learning
3. âœ… Launch to production!

---

## ğŸ“ˆ SUCCESS METRICS

### **System-Level:**

- âœ… 100% athletes complete signup process
- âœ… 90%+ complete 14-day baseline assessment
- âœ… 85%+ daily workout completion rate
- âœ… < 5% injury rate
- âœ… Average ability improvement: +15 points/month

### **Athlete-Level:**

- âœ… Achieve goal pace in target timeline
- âœ… Maintain 80% HR in training runs
- âœ… Finish races strong
- âœ… Zero injuries during training
- âœ… High satisfaction (> 4.5/5 rating)

---

## ğŸ’¬ TELEGRAM BOT FLOW

### **After Signup:**

```
AISRI: "Welcome, Rajesh! ğŸ‰ I'm AISRI, your AI running coach.

I see you've set a goal to run 10K in 60 minutes. Great choice!

Based on your Strava history, I've created a personalized 14-day
baseline assessment to understand your true capabilities.

Day 1 Workout: Easy 3K run
ğŸ“ Distance: 3 km
â±ï¸ Pace: 7:30/km (easy - you should be able to chat)
â¤ï¸ Heart Rate: Keep it under 150 bpm (80% of your max)
ğŸ“ Focus: Relaxed form, comfortable breathing

Connect your Garmin/Strava to auto-track this workout!
When you finish, I'll analyze your performance.

Remember: The goal isn't to impress me - it's to learn YOUR
baseline so I can create the perfect plan. Run relaxed! ğŸƒâ€â™‚ï¸"
```

### **After Each Workout:**

```
AISRI: "Great job on today's workout, Rajesh! ğŸ‰

ğŸ“Š Performance Analysis:
âœ… Distance: 3.2 km (Expected: 3.0 km)
âœ… Pace: 7:22/km (Expected: 7:30/km)
âœ… Heart Rate: 152 bpm (Target: <150, close enough!)
âœ… Label: GREAT

What I learned:
â€¢ You're stronger than your history suggested!
â€¢ Your pace naturally falls around 7:20/km at easy effort
â€¢ You maintained good HR control

Tomorrow's workout:
Day 2: ROM + Strength (30 minutes)
I'll send details in the morning. Rest well! ğŸ’ª"
```

---

## ğŸ¯ NEXT STEPS

1. **Review this architecture** - Does it match your vision?
2. **Approve database schema** - Ready to create tables?
3. **Start implementation** - Begin with Phase 1?
4. **CSV data format** - Share Google Form structure?
5. **Test with real athletes** - Import existing signups?

---

**LET'S BUILD THE FUTURE OF AI RUNNING COACHING! ğŸš€ğŸƒâ€â™‚ï¸ğŸ’ª**
